<!DOCTYPE html><html><head><title>Cybozu Frontend Monthly #10</title><meta name="description" content="サイボウズのフロントエンドエキスパートチームが月イチでお届けするフロントエンド情報"/><meta name="og:description" content="サイボウズのフロントエンドエキスパートチームが月イチでお届けするフロントエンド情報"/><meta name="og:title" content="Cybozu Frontend Monthly #10"/><meta name="og:type" content="website"/><meta name="og:image" content="https://cybozu.github.io/frontend-monthly/assets/img/header.png"/><meta name="twitter:title" content="Cybozu Frontend Monthly #10"/><meta name="twitter:description" content="サイボウズのフロントエンドエキスパートチームが月イチでお届けするフロントエンド情報"/><meta name="twitter:card" content="summary"/><meta name="twitter:creator" content="Cybozu Frontend Expert Team"/><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.21.0/themes/prism.min.css"/><meta name="next-head-count" content="14"/><link rel="preload" href="/_next/static/css/de019082f7bd6e5c1d8d.css" as="style"/><link rel="stylesheet" href="/_next/static/css/de019082f7bd6e5c1d8d.css" data-n-g=""/><link rel="preload" href="/_next/static/css/dfdf5f649880e41cbd5c.css" as="style"/><link rel="stylesheet" href="/_next/static/css/dfdf5f649880e41cbd5c.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-a54b4f32bdc1ef890ddd.js"></script><script src="/_next/static/chunks/webpack-377d9957422d331503bc.js" defer=""></script><script src="/_next/static/chunks/framework-92300432a1172ef1338b.js" defer=""></script><script src="/_next/static/chunks/main-08911db57cbb5406b625.js" defer=""></script><script src="/_next/static/chunks/pages/_app-0eda503e19a294e1d1a6.js" defer=""></script><script src="/_next/static/chunks/423-4bcace61643c26d7ea4d.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bslug%5D-ef2fc0284b56e952f610.js" defer=""></script><script src="/_next/static/YEDqcfiOgV5lpJgYEkujL/_buildManifest.js" defer=""></script><script src="/_next/static/YEDqcfiOgV5lpJgYEkujL/_ssgManifest.js" defer=""></script></head><body><div id="__next"><style data-emotion="css crwfbk">.css-crwfbk{display:grid;grid-template-rows:auto 1fr auto;height:100vh;box-sizing:border-box;}.css-crwfbk .main{box-sizing:border-box;min-width:200px;max-width:980px;width:100%;margin:0 auto;padding:15px 45px;color:#24292e;}.css-crwfbk .main h1{margin-top:0;}@media (max-width: 767px){.css-crwfbk .main{padding:12px;font-size:14px;}.css-crwfbk .main .markdown-body{font-size:14px;}.css-crwfbk .main h1{font-size:1.55em;margin-bottom:0.25em;margin-top:0.5em;}.css-crwfbk .main h2{font-size:1.3em;margin-bottom:0.25em;margin-top:0.5em;}.css-crwfbk .main h3{font-size:1.1em;margin-bottom:0.25em;margin-top:0.5em;}.css-crwfbk .main hr{margin:12px 0;}}.css-crwfbk .footer{background-color:#31424e;text-align:center;color:#f8f8ff;font-size:0.75em;padding:5px 0;}.css-crwfbk .footer a{color:inherit;}</style><div class="markdown-body css-crwfbk"><main class="main"><style data-emotion="css e4jomx">.css-e4jomx .markdown-body img{border:1px solid rgba(0, 0, 0, 0.1);max-width:90%;height:auto;margin:12px auto;display:block;}.css-e4jomx .markdown-body li>p{margin:8px 0;}@media screen and (max-width: 420px){.css-e4jomx .markdown-body{font-size:14px;}.css-e4jomx .markdown-body li>p{margin:4px 0;}}.css-e4jomx h1{margin-top:0;}.css-e4jomx >h1:first-of-type{margin-top:0!important;}.css-e4jomx h3{position:relative;margin-left:-5px;padding-left:5px;}.css-e4jomx h3:hover .icon.icon-link{position:absolute;right:calc(100%);}.css-e4jomx h3:hover .icon.icon-link:before{font-size:0.75em;content:"🔗";}</style><article class="css-e4jomx"><h1>Cybozu Frontend Monthly #10</h1><div><img src="/assets/img/header.png" width="659" height="229" alt=""/></div><h2>イベント概要</h2><p><strong>サイボウズフロントエンドマンスリー</strong>は、サイボウズ社内で行っているフロントエンド情報共有会「フロントエンドウィークリー」の公開版です。</p><p>その月に気になったフロントエンドの情報を、サイボウズのフロントエンドエキスパートチームのメンバーが共有していきます。</p><p><strong>このイベントのハッシュタグは<!-- --> <a href="https://twitter.com/search?q=%23%E3%82%B5%E3%82%A4%E3%83%9C%E3%82%A6%E3%82%BA%E3%83%95%E3%83%AD%E3%83%B3%E3%83%88%E3%82%A8%E3%83%B3%E3%83%89%E3%83%9E%E3%83%B3%E3%82%B9%E3%83%AA%E3%83%BC" target="_blank" rel="noopener noreferrer">#サイボウズフロントエンドマンスリー</a> <!-- -->です。</strong></p><style data-emotion="css y47mw7">.css-y47mw7 h3{margin-top:0;}.css-y47mw7 p{margin-bottom:0;white-space:pre-line;}</style><pre class="css-y47mw7"><h3>※フロントエンドウィークリーとは</h3><p>毎週火曜の 17:00 〜 18:00 で社内向けに行っているフロントエンドの気になる記事を紹介する会です。2016年3月15日から行われています。<br/>ハッシュタグ<!-- --> <a href="https://twitter.com/search?q=%23%E3%82%B5%E3%82%A4%E3%83%9C%E3%82%A6%E3%82%BA%E3%83%95%E3%83%AD%E3%83%B3%E3%83%88%E3%82%A8%E3%83%B3%E3%83%89%E3%82%A6%E3%82%A3%E3%83%BC%E3%82%AF%E3%83%AA%E3%83%BC" target="_blank" rel="noopener noreferrer">#サイボウズフロントエンドウィークリー</a> <!-- -->で実況しています。</p></pre><h3>開催日</h3><p>2021年04月27日</p><h3>イベントページ</h3><p><a href="https://cybozu.connpass.com/event/211827/" target="_blank" rel="noopener noreferrer">https://cybozu.connpass.com/event/211827/</a></p><h3>配信URL</h3><style data-emotion="css 14br0ti">.css-14br0ti .embed{display:block;max-width:100%;max-height:280px;}</style><p class="css-14br0ti"><iframe title="https://www.youtube.com/embed/LssNt4WtnyA" width="560" height="315" src="https://www.youtube.com/embed/LssNt4WtnyA" frameBorder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="" class="embed"></iframe><a href="https://www.youtube.com/watch?v=LssNt4WtnyA" target="_blank" rel="noreferrer noopner">https://www.youtube.com/watch?v=LssNt4WtnyA</a></p><h3>タイムテーブル</h3><table><tbody><tr><td>07:50 - 08:00</td><td>配信開始</td></tr><tr><td>08:00 - 08:05</td><td>オープニング</td></tr><tr><td>08:05 - 08:55</td><td>本編</td></tr><tr><td>08:55 - 09:00</td><td>クロージング</td></tr></tbody></table><h2>メンバー</h2><style data-emotion="css 1g63iqu">.css-1g63iqu{display:grid;grid-template-columns:repeat(auto-fill, minmax(120px, 1fr));grid-gap:24px 12px;padding:12px;}.css-1g63iqu .member{text-align:center;}.css-1g63iqu .thumbnail{border-radius:50%;margin:0 auto 5px;}</style><div class="css-1g63iqu"><div class="member"><img class="thumbnail" src="/assets/photo/f8079885d680213e64e4d706daa4a5ee_400x400.jpeg" width="100" height="100" alt=""/><a href="https://twitter.com/koba04" target="_blank" rel="noopener noreferrer">@koba04</a></div><div class="member"><img class="thumbnail" src="/assets/photo/a95b52be00e06cd293a6853bc36490bc_400x400.jpeg" width="100" height="100" alt=""/><a href="https://twitter.com/pirosikick" target="_blank" rel="noopener noreferrer">@pirosikick</a></div><div class="member"><img class="thumbnail" src="/assets/photo/erghEqaW_400x400.png" width="100" height="100" alt=""/><a href="https://twitter.com/__sakito__" target="_blank" rel="noopener noreferrer">@__sakito__</a></div><div class="member"><img class="thumbnail" src="/assets/photo/A9M8G6DH_400x400.jpg" width="100" height="100" alt=""/><a href="https://twitter.com/shisama_" target="_blank" rel="noopener noreferrer">@shisama_</a></div><div class="member"><img class="thumbnail" src="/assets/photo/EKNVNzOg_400x400.jpg" width="100" height="100" alt=""/><a href="https://twitter.com/nakajmg" target="_blank" rel="noopener noreferrer">@nakajmg</a></div><div class="member"><img class="thumbnail" src="/assets/photo/QySbTwnO_400x400.jpg" width="100" height="100" alt=""/><a href="https://twitter.com/b4h0_c4t" target="_blank" rel="noopener noreferrer">@b4h0_c4t</a></div><div class="member"><img class="thumbnail" src="/assets/photo/7iJNhdua_400x400.jpg" width="100" height="100" alt=""/><a href="https://twitter.com/__sosukesuzuki" target="_blank" rel="noopener noreferrer">@__sosukesuzuki</a></div></div><h2>ゲスト</h2><div class="css-1g63iqu"><div class="member"><img class="thumbnail" src="/assets/photo/Kz28LqTn_400x400.png" width="100" height="100" alt=""/><a href="https://twitter.com/laco2net" target="_blank" rel="noopener noreferrer">@lacolaco</a></div></div><hr/><h2>紹介記事</h2><div class="markdown-body"><h3 id="mdn-のフレームワークガイドに-angular-チュートリアルが追加された"><a href="#mdn-%E3%81%AE%E3%83%95%E3%83%AC%E3%83%BC%E3%83%A0%E3%83%AF%E3%83%BC%E3%82%AF%E3%82%AC%E3%82%A4%E3%83%89%E3%81%AB-angular-%E3%83%81%E3%83%A5%E3%83%BC%E3%83%88%E3%83%AA%E3%82%A2%E3%83%AB%E3%81%8C%E8%BF%BD%E5%8A%A0%E3%81%95%E3%82%8C%E3%81%9F" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>MDN のフレームワークガイドに Angular チュートリアルが追加された</h3>
<ul>
<li>共有者: lacolaco</li>
</ul>
<p><a href="https://developer.mozilla.org/en-US/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks" target="_blank" rel="nofollow">Understanding client-side JavaScript frameworks - Learn web development | MDN</a> にはこれまで React, Ember, Vue, Svelte のチュートリアルがあったが、そこに Angular も追加された。</p>
<p><a href="https://developer.mozilla.org/en-US/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks#angular_tutorials" target="_blank" rel="nofollow">Angular tutorials</a></p>
<p>Google の Angular Docs チームがチュートリアルを作成して提供したらしい。</p>
<p><a href="https://github.com/mdn/content/pull/3972" target="_blank" rel="nofollow">adding angular docs by chrisdavidmills · Pull Request #3972 · mdn/content</a></p>
<hr>
<h3 id="e2e-テストツールの-protractor-の開発終了計画"><a href="#e2e-%E3%83%86%E3%82%B9%E3%83%88%E3%83%84%E3%83%BC%E3%83%AB%E3%81%AE-protractor-%E3%81%AE%E9%96%8B%E7%99%BA%E7%B5%82%E4%BA%86%E8%A8%88%E7%94%BB" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>E2E テストツールの Protractor の開発終了計画</h3>
<ul>
<li>共有: lacolaco</li>
</ul>
<p><a href="https://github.com/angular/protractor/issues/5502" target="_blank" rel="nofollow">Future of Angular E2E &#x26; Plans for Protractor · Issue #5502 · angular/protractor</a></p>
<p>2013 年から Angular チームが開発してきた E2E ツール <a href="https://github.com/angular/protractor" target="_blank" rel="nofollow">Protractor</a> を 2022 年をもって終了する計画。</p>
<ul>
<li>v12 (今年 5 月) から新規プロジェクトへのデフォルト導入を廃止</li>
<li>v15 (来年冬）にメンテナンス終了</li>
</ul>
<p>Angular CLI の <code>ng e2e</code> コマンドは互換性のあるサードパーティ E2E ツールの導入によって機能するようになり、デフォルトでは実体を持たない予定。（<code>ng deploy</code> と AngularFire、<code>ng lint</code> と <code>angular-eslint</code> のような関係になる）</p>
<p>背景:</p>
<ul>
<li>2013 年当初、まだ WebDriver API が標準化されていない時期、非同期処理をサポートした E2E テストのために Protractor を開発した
<ul>
<li>Promise による非同期コールバック地獄をどう克服するかが焦点</li>
<li>（WebDriver って W3C に Spec あったの初めて知った <a href="https://www.w3.org/TR/webdriver/" target="_blank" rel="nofollow">https://www.w3.org/TR/webdriver/</a>)</li>
</ul>
</li>
<li>WebDriverJS(Selenium)や Protractor は Promise Manager（あるいは Control Flow）と呼ばれる機能を実装し、E2E テストケースの記述に Promise が登場しないようにした
<ul>
<li>テストケース上は同期的に書けるような API</li>
<li><a href="https://github.com/SeleniumHQ/selenium/wiki/WebDriverJs#introduction" target="_blank" rel="nofollow">https://github.com/SeleniumHQ/selenium/wiki/WebDriverJs#introduction</a></li>
<li>Puppetter や Cypress の書き味のベースになっているのがよくわかる</li>
</ul>
</li>
<li><code>async/await</code> の登場
<ul>
<li>Promise Manager なしでも同期処理のような書き方でテストが書けるようになった</li>
<li><code>async/await</code> には JavaScript からフックできないため、Promise Manager とは互換性がない</li>
</ul>
</li>
<li>2013 年からメンテナンスされてきた Protractor を ES2017 ベースに作り変えるのは非常に労力がかかるため、サポートを終了する
<ul>
<li>もともと AngularJS アプリの E2E テストのために作ったが AngularJS も今年で EOL なので、維持する理由がほぼなくなった</li>
</ul>
</li>
</ul>
<hr>
<h3 id="cookie-利用通知のベストプラクティス"><a href="#cookie-%E5%88%A9%E7%94%A8%E9%80%9A%E7%9F%A5%E3%81%AE%E3%83%99%E3%82%B9%E3%83%88%E3%83%97%E3%83%A9%E3%82%AF%E3%83%86%E3%82%A3%E3%82%B9" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Cookie 利用通知のベストプラクティス</h3>
<ul>
<li>共有: lacolaco</li>
</ul>
<p><a href="https://web.dev/cookie-notice-best-practices/" target="_blank" rel="nofollow">Best practices for cookie notices</a></p>
<p>web.dev より、パフォーマンスやユーザー体験をできるだけ損なわないように Cookie の利用表示を出すためのプラクティス</p>
<ul>
<li>Cookie 通知スクリプトは非同期で読み込む
<ul>
<li>できるだけ Resource Hints も使って先読みする</li>
</ul>
</li>
<li>Testing cookie notices with WebPageTest
<ul>
<li>WebPageTest の機能で Cookie 通知のボタンを押すところまでをテストできる</li>
</ul>
</li>
<li>Testing cookie notices with Lighthouse
<ul>
<li><code>Clear Storage</code> でテストすれば Cookie 通知が出る状態をテストできる</li>
<li>CLI の場合は <code>--extra-headers</code> で任意の Cookie を無理やりつけてテストできる</li>
</ul>
</li>
<li>Placement
<ul>
<li>ヘッダーかフッターが一般的
<ul>
<li>特にフッターはレイアウトシフトも起こさないので推奨</li>
</ul>
</li>
<li>インラインも有効だが実装の組み込みが容易じゃない場合が多く選択されにくい</li>
<li>モーダル
<ul>
<li>小さい部分モーダルなら CLS を引き起こさず邪魔にならない通知を出す手段になる可能性</li>
<li>全画面モーダルはユーザーの脱落が起こりやすいため注意
<ul>
<li>
<blockquote>
<p>フルスクリーンの Cookie 同意モーダルの使用を検討している場合は、<a href="https://techcrunch.com/2020/05/06/no-cookie-consent-walls-and-no-scrolling-isnt-consent-says-eu-data-protection-body/" target="_blank" rel="nofollow">cookie walls</a>に関する法律に注意する必要があります。</p>
</blockquote>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<hr>
<h3 id="サードパーティスクリプトをコントロール下に置く"><a href="#%E3%82%B5%E3%83%BC%E3%83%89%E3%83%91%E3%83%BC%E3%83%86%E3%82%A3%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%97%E3%83%88%E3%82%92%E3%82%B3%E3%83%B3%E3%83%88%E3%83%AD%E3%83%BC%E3%83%AB%E4%B8%8B%E3%81%AB%E7%BD%AE%E3%81%8F" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>サードパーティスクリプトをコントロール下に置く</h3>
<ul>
<li>共有: lacolaco</li>
</ul>
<p><a href="https://web.dev/controlling-third-party-scripts/" target="_blank" rel="nofollow">Keeping third-party scripts under control</a></p>
<ul>
<li>サードパーティスクリプトをコントローラブルな状態で利用するためのガバナンス設計</li>
<li>Tag governance process
<ul>
<li>コンプライアンス</li>
<li>必要性の確認</li>
<li>オーナーシップの明確化</li>
<li>利用用途の明確化
<ul>
<li>
<blockquote>
<p>Furthermore, have there been any commercial vs performance trade-off discussions? If there is a tag that is deemed as "required" because it brings in revenue, has there been an analysis to the potential revenue lost through speed regression</p>
</blockquote>
</li>
</ul>
</li>
<li>定期的なレビュー
<ul>
<li>Web サイトのスクリプトのサイズやサードパーティスクリプトの数など、気づかないうちに肥大化することを防ぐ</li>
<li>パフォーマンスバジェットとして定義して CI などで確認することもできるかもしれない</li>
</ul>
</li>
</ul>
</li>
</ul>
<hr>
<h3 id="april-2021-73---babelproposal"><a href="#april-2021-73---babelproposal" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a><a href="https://github.com/babel/proposals/issues/73" target="_blank" rel="nofollow">April 2021 #73 - babel/proposal</a></h3>
<ul>
<li>共有者: sosukesuzuki</li>
</ul>
<p>Google の Justin Ridgewell が TC39 ミーティングがあるたびにプロポーザルの変動を教えてくれる Issue 2021 年 4 月版。</p>
<p>今回の見どころ</p>
<ul>
<li>Class Features が Stage 4 になり ES2022 となる初めての提案に</li>
<li>object.has が今回初登場にも関わらず Stage 1 を飛ばして一気に Stage 2 へ</li>
</ul>
<h4 id="0---1"><a href="#0---1" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>0 -> 1</h4>
<ul>
<li><a href="https://github.com/Jack-Works/proposal-readonly-arraybuffer/" target="_blank" rel="nofollow">Read-only ArrayBuffer</a>
<ul>
<li>freeze できる ArrayBuffer</li>
</ul>
</li>
<li><a href="https://github.com/Jack-Works/proposal-arraybuffer-fixed-view" target="_blank" rel="nofollow">Fixed view of ArrayBuffer</a>
<ul>
<li>DataView から .buffer が読めない ArrayBuffer</li>
</ul>
</li>
<li><a href="https://github.com/rricard/proposal-change-array-by-copy" target="_blank" rel="nofollow">Change Array by copy</a>
<ul>
<li>イミュータブルな配列操作メソッド</li>
</ul>
</li>
</ul>
<h4 id="0---2"><a href="#0---2" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>0 -> 2</h4>
<ul>
<li><a href="https://github.com/jamiebuilds/proposal-object-has" target="_blank" rel="nofollow">object.has</a>
<ul>
<li><code>hasOwnProperty</code> のスタティックメソッド版</li>
</ul>
</li>
</ul>
<h4 id="1---2"><a href="#1---2" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>1 -> 2</h4>
<ul>
<li><a href="https://github.com/tc39/proposal-symbols-as-weakmap-keys" target="_blank" rel="nofollow">Symbols as WeakMap keys</a>
<ul>
<li>WeakMap のキーとしてシンボルを使えるようになる</li>
</ul>
</li>
</ul>
<h4 id="3---4"><a href="#3---4" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>3 -> 4</h4>
<p>ES2022 に入るはじめての提案</p>
<ul>
<li><a href="https://github.com/tc39/proposal-class-fields" target="_blank" rel="nofollow">Class Fields</a></li>
<li><a href="https://github.com/tc39/proposal-private-methods" target="_blank" rel="nofollow">Private methods</a></li>
<li><a href="https://github.com/tc39/proposal-static-class-features" target="_blank" rel="nofollow">Static class features</a></li>
</ul>
<hr>
<h3 id="slow-and-steady-converting-sentrys-entire-frontend-to-typescript"><a href="#slow-and-steady-converting-sentrys-entire-frontend-to-typescript" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a><a href="https://blog.sentry.io/2021/04/12/slow-and-steady-converting-sentrys-entire-frontend-to-typescript" target="_blank" rel="nofollow">Slow and Steady: Converting Sentry’s Entire Frontend to TypeScript</a></h3>
<ul>
<li>共有者: sakito</li>
</ul>
<p>Sentry を 12 人で 1 年間かけて 1100 ファイル(9,500 行)を TS に置き換えたはなしです。</p>
<p>TS に置き換える話は昨今よくある話ですが、この記事では取り組みについて啓蒙活動から具体的なアクションまで説明されています。</p>
<p>チームの教育 => 開発しやすいように基盤の構築 => 戦略を立てていく(頻繁に使用するファイルから倒していく) => モチベの維持(slackbot で進捗を可視化など)の流れで進めたとのことです。</p>
<p>TS の置き換えが終わるまで、React の hooks 化やライブラリーのアップデートを行わず集中してやったとも書かれています。</p>
<p>TS に置き換える以外でも参考になる話でした。</p>
<hr>
<h3 id="solving-a-mystery-behavior-of-parseint-in-javascript"><a href="#solving-a-mystery-behavior-of-parseint-in-javascript" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a><a href="https://dmitripavlutin.com/parseint-mystery-javascript/" target="_blank" rel="nofollow">Solving a Mystery Behavior of parseInt() in JavaScript</a></h3>
<ul>
<li>共有者: pirosikick</li>
</ul>
<p>小ネタ。<code>parseInt(0.000005)</code>は<code>0</code>を返すのに、<code>parseInt(0.0000005)</code>は<code>5</code>を返す件について。最近、別件で parseInt 関数の仕様を調べる機会があったので紹介。</p>
<p><a href="https://tc39.es/ecma262/#sec-parseint-string-radix" target="_blank" rel="nofollow">parseInt 関数の仕様</a>は、かなりざ〜っくり説明すると以下のとおり。</p>
<ul>
<li>parseInt(string, radix)</li>
<li>inputString = ToString(string)</li>
<li>inputString の先頭のスペースを trim する</li>
<li>radix が<code>0</code> or <code>undefined</code>の場合は、radix = 10 とするけど、string の先頭が"0x" or "0X"の場合は radix = 16</li>
<li>radix が<code>16</code>の場合、string は"0x" or "0X で始まってもいい</li>
<li>radix &#x3C; 2 || radix > 36 → return NaN</li>
<li>先頭の<code>+</code>,<code>-</code>（プラス、マイナス）は取り除いて、
radix 進数の範囲外の文字が見つかったらその文字の前までの文字列を評価する
<ul>
<li>例）radix が<code>2</code>で<code>"0101012"</code>が入力された場合、<code>"010101"</code>を評価する</li>
</ul>
</li>
<li>先頭が<code>-</code>の場合は、-1 を掛ける</li>
</ul>
<p>parseInt 関数の第 1 引数は<code>ToString</code>されるので、<code>0.0000005</code>は<code>"5e-7"</code>になる（ちなみに、<code>String(0.000005)</code>は<code>"0"</code>）。「radix 進数の範囲外の文字が見つかったらその文字の前までの文字列を評価する」ので<code>"5"</code>だけ評価され、<code>5</code>を返す。</p>
<p>ちなみに、「radix 進数の範囲外の文字が見つかったらその文字の前までの文字列を評価する」という仕様は、<code>"10px"</code>のような数字 + suffix の文字列から数字だけを取り出すときに便利。</p>
<div class="remark-highlight"><pre class="language-js"><code class="language-js"><span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token string">"10px"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// => 10</span>
</code></pre></div>
<hr>
<h3 id="今月の-ie11-関連情報"><a href="#%E4%BB%8A%E6%9C%88%E3%81%AE-ie11-%E9%96%A2%E9%80%A3%E6%83%85%E5%A0%B1" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>今月の IE11 関連情報</h3>
<ul>
<li>共有者: nakajmg</li>
</ul>
<p>今月も IE サポートを終了したり終了の予告を出すサービスや会社がありました。</p>
<ul>
<li><a href="https://help.abema.tv/hc/ja/articles/360055647611" target="_blank" rel="nofollow">ABEMA が 4/21 をもって IE11 のサポートを終了した</a></li>
<li><a href="https://help.hulu.jp/hc/ja/articles/900005502846" target="_blank" rel="nofollow">hulu が 2021/07/14 でサポートを終了を予告</a></li>
</ul>
<p>IE11 関連の動きが気になる方は<a href="https://docs.google.com/document/d/1XP58gVMyp_UCP4FFsf5ATpvRVwqi7v_EpEF3sl_Sobk" target="_blank" rel="nofollow">IE11 サポート終了の歴史</a>をチェック。</p>
<hr>
<h3 id="deps-add-yarn-1225-by-arcanis-·-pull-request-37277-·-nodejsnode"><a href="#deps-add-yarn-1225-by-arcanis-%C2%B7-pull-request-37277-%C2%B7-nodejsnode" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a><a href="https://github.com/nodejs/node/pull/37277" target="_blank" rel="nofollow">deps: add Yarn 1.22.5 by arcanis · Pull Request #37277 · nodejs/node</a></h3>
<ul>
<li>共有者: shisama</li>
</ul>
<p>yarn v1をNode.js本体に追加するPRが出ています。</p>
<p>これがマージされれば、npmで個別にyarnをインストールしなくてもNode.jsをインストールするだけでyarnも使えるようになります。</p>
<p>ただ、yarnはすでにv2がリリースされていて、今後はyarn v2がメンテされていきます。
そのため、v1すでにレガシーという意見もありますが、現状<code>npm install yarn</code>ではv1がインストールされる現状やv1は今でも利用者が多いことや、yarn v2を使いたいユーザーにとっても価値のあるものとしてyarn v1を選んだとのこと。</p>
<blockquote>
<p>Yarn 1 isn't legacy</p>
</blockquote>
<p><a href="https://github.com/nodejs/node/pull/37277#issuecomment-775586604" target="_blank" rel="nofollow">https://github.com/nodejs/node/pull/37277#issuecomment-775586604</a></p>
<p>yarnを加えること自体に賛否があります。
yarnはnpmよりパフォーマンスなど優れているんだからyarnは入れるべきという意見や、メンテコストが上がるから増やすべきではないという意見があります。そもそもNode.js本体にパッケージマネージャーは入れなくてもいいのではという意見もあります。</p>
<p>しかし現行のnpmはyarn v1と同じぐらい優れているし、yarn v1には修正されない重大なバグもある、複数パッケージがあると初心者は混乱するのではないかと指摘があります。
<a href="https://github.com/nodejs/node/pull/37277#issuecomment-817898794" target="_blank" rel="nofollow">https://github.com/nodejs/node/pull/37277#issuecomment-817898794</a></p>
<p>もう一案としてはcorepack経由でyarnをNode.js本体に含めるという案もあります。
<a href="https://github.com/nodejs/node/pull/37277#issuecomment-819824338" target="_blank" rel="nofollow">https://github.com/nodejs/node/pull/37277#issuecomment-819824338</a></p>
<p>corepackはyarnとかpnpmなどnpm以外のパッケージマネージャーを一括管理するツールです。現在はnodejs管理下に置かれています。今でもnpmからインストールして使えます。
<a href="https://github.com/nodejs/corepack" target="_blank" rel="nofollow">https://github.com/nodejs/corepack</a></p>
<p>corepackをNode.js本体に入れるPRも出ています。
<a href="https://github.com/nodejs/node/pull/35398" target="_blank" rel="nofollow">https://github.com/nodejs/node/pull/35398</a></p>
<p>今週末にTSCのMTGがあって、この件もAgendaに載っているので何らかの動きがありそう。</p>
<p>Node.js関連だと4/20にNode.js v16がリリースされました。
M1 MacでもNode.jsが動くようになったり、timers/promisesが便利だったりします。
あと、Node.js v10が4/30でEnd-of-Lifeなので、移行してください。</p>
<ul>
<li><a href="https://nodejs.org/en/blog/release/v16.0.0/" target="_blank" rel="nofollow">Node v16.0.0 (Current) | Node.js</a></li>
<li><a href="https://shisama.hatenablog.com/entry/2021/04/22/090000" target="_blank" rel="nofollow">Node.js v16 の主な変更点 - 別にしんどくないブログ</a></li>
</ul>
<hr>
<h3 id="css-is-a-strongly-typed-language"><a href="#css-is-a-strongly-typed-language" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a><a href="https://css-tricks.com/css-is-a-strongly-typed-language/" target="_blank" rel="nofollow">CSS is a Strongly Typed Language</a></h3>
<ul>
<li>共有者: b4h0_c4t</li>
</ul>
<p>名前から強めの思想を感じ取ったので共有。</p>
<p>最近 TypeScript のような強い型付け言語がはやっているけど、CSSも強い型付け言語なんだよ、という話しの読み物系記事。
CSSプロパティの型リストが書いてあったり、CSSのレジリエンスについて幾つかのエラーケースをもとにCodePenで解説していたりと学びも多いと思います。</p>
<hr>
</div><h2>フロントエンドエキスパートチームについて</h2><style data-emotion="css gz8dae">.css-gz8dae{padding:20px;}</style><div class="css-gz8dae"></div><p style="margin-bottom:0"><a href="https://speakerdeck.com/cybozuinsideout/frontendexpert-team" target="_blank" rel="nofollow noopener noreferrer">https://speakerdeck.com/cybozuinsideout/frontendexpert-team</a></p></article></main><footer class="footer"><a href="/">Cybozu Frontend Monthly</a></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"membersPhotoUrl":{"@koba04":"/assets/photo/f8079885d680213e64e4d706daa4a5ee_400x400.jpeg","@pirosikick":"/assets/photo/a95b52be00e06cd293a6853bc36490bc_400x400.jpeg","@__sakito__":"/assets/photo/erghEqaW_400x400.png","@shisama_":"/assets/photo/A9M8G6DH_400x400.jpg","@nakajmg":"/assets/photo/EKNVNzOg_400x400.jpg","@b4h0_c4t":"/assets/photo/QySbTwnO_400x400.jpg","@__sosukesuzuki":"/assets/photo/7iJNhdua_400x400.jpg","@lacolaco":"/assets/photo/Kz28LqTn_400x400.png"},"frontmatter":{"title":"Cybozu Frontend Monthly","date":"2021-04-27T17:00:00+09:00","slug":"2021-04","connpass":"https://cybozu.connpass.com/event/211827/","streamUrl":"https://www.youtube.com/watch?v=LssNt4WtnyA","no":10,"members":[{"name":"@koba04","link":"https://twitter.com/koba04"},{"name":"@pirosikick","link":"https://twitter.com/pirosikick"},{"name":"@__sakito__","link":"https://twitter.com/__sakito__"},{"name":"@shisama_","link":"https://twitter.com/shisama_"},{"name":"@nakajmg","link":"https://twitter.com/nakajmg"},{"name":"@b4h0_c4t","link":"https://twitter.com/b4h0_c4t"},{"name":"@__sosukesuzuki","link":"https://twitter.com/__sosukesuzuki"}],"guest":[{"name":"@lacolaco","link":"https://twitter.com/laco2net"}]},"html":"\u003ch3 id=\"mdn-のフレームワークガイドに-angular-チュートリアルが追加された\"\u003e\u003ca href=\"#mdn-%E3%81%AE%E3%83%95%E3%83%AC%E3%83%BC%E3%83%A0%E3%83%AF%E3%83%BC%E3%82%AF%E3%82%AC%E3%82%A4%E3%83%89%E3%81%AB-angular-%E3%83%81%E3%83%A5%E3%83%BC%E3%83%88%E3%83%AA%E3%82%A2%E3%83%AB%E3%81%8C%E8%BF%BD%E5%8A%A0%E3%81%95%E3%82%8C%E3%81%9F\" aria-hidden=\"true\" tabindex=\"-1\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003eMDN のフレームワークガイドに Angular チュートリアルが追加された\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e共有者: lacolaco\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003ca href=\"https://developer.mozilla.org/en-US/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks\" target=\"_blank\" rel=\"nofollow\"\u003eUnderstanding client-side JavaScript frameworks - Learn web development | MDN\u003c/a\u003e にはこれまで React, Ember, Vue, Svelte のチュートリアルがあったが、そこに Angular も追加された。\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://developer.mozilla.org/en-US/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks#angular_tutorials\" target=\"_blank\" rel=\"nofollow\"\u003eAngular tutorials\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eGoogle の Angular Docs チームがチュートリアルを作成して提供したらしい。\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/mdn/content/pull/3972\" target=\"_blank\" rel=\"nofollow\"\u003eadding angular docs by chrisdavidmills · Pull Request #3972 · mdn/content\u003c/a\u003e\u003c/p\u003e\n\u003chr\u003e\n\u003ch3 id=\"e2e-テストツールの-protractor-の開発終了計画\"\u003e\u003ca href=\"#e2e-%E3%83%86%E3%82%B9%E3%83%88%E3%83%84%E3%83%BC%E3%83%AB%E3%81%AE-protractor-%E3%81%AE%E9%96%8B%E7%99%BA%E7%B5%82%E4%BA%86%E8%A8%88%E7%94%BB\" aria-hidden=\"true\" tabindex=\"-1\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003eE2E テストツールの Protractor の開発終了計画\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e共有: lacolaco\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/angular/protractor/issues/5502\" target=\"_blank\" rel=\"nofollow\"\u003eFuture of Angular E2E \u0026#x26; Plans for Protractor · Issue #5502 · angular/protractor\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e2013 年から Angular チームが開発してきた E2E ツール \u003ca href=\"https://github.com/angular/protractor\" target=\"_blank\" rel=\"nofollow\"\u003eProtractor\u003c/a\u003e を 2022 年をもって終了する計画。\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003ev12 (今年 5 月) から新規プロジェクトへのデフォルト導入を廃止\u003c/li\u003e\n\u003cli\u003ev15 (来年冬）にメンテナンス終了\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eAngular CLI の \u003ccode\u003eng e2e\u003c/code\u003e コマンドは互換性のあるサードパーティ E2E ツールの導入によって機能するようになり、デフォルトでは実体を持たない予定。（\u003ccode\u003eng deploy\u003c/code\u003e と AngularFire、\u003ccode\u003eng lint\u003c/code\u003e と \u003ccode\u003eangular-eslint\u003c/code\u003e のような関係になる）\u003c/p\u003e\n\u003cp\u003e背景:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e2013 年当初、まだ WebDriver API が標準化されていない時期、非同期処理をサポートした E2E テストのために Protractor を開発した\n\u003cul\u003e\n\u003cli\u003ePromise による非同期コールバック地獄をどう克服するかが焦点\u003c/li\u003e\n\u003cli\u003e（WebDriver って W3C に Spec あったの初めて知った \u003ca href=\"https://www.w3.org/TR/webdriver/\" target=\"_blank\" rel=\"nofollow\"\u003ehttps://www.w3.org/TR/webdriver/\u003c/a\u003e)\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eWebDriverJS(Selenium)や Protractor は Promise Manager（あるいは Control Flow）と呼ばれる機能を実装し、E2E テストケースの記述に Promise が登場しないようにした\n\u003cul\u003e\n\u003cli\u003eテストケース上は同期的に書けるような API\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/SeleniumHQ/selenium/wiki/WebDriverJs#introduction\" target=\"_blank\" rel=\"nofollow\"\u003ehttps://github.com/SeleniumHQ/selenium/wiki/WebDriverJs#introduction\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003ePuppetter や Cypress の書き味のベースになっているのがよくわかる\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003easync/await\u003c/code\u003e の登場\n\u003cul\u003e\n\u003cli\u003ePromise Manager なしでも同期処理のような書き方でテストが書けるようになった\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003easync/await\u003c/code\u003e には JavaScript からフックできないため、Promise Manager とは互換性がない\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e2013 年からメンテナンスされてきた Protractor を ES2017 ベースに作り変えるのは非常に労力がかかるため、サポートを終了する\n\u003cul\u003e\n\u003cli\u003eもともと AngularJS アプリの E2E テストのために作ったが AngularJS も今年で EOL なので、維持する理由がほぼなくなった\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch3 id=\"cookie-利用通知のベストプラクティス\"\u003e\u003ca href=\"#cookie-%E5%88%A9%E7%94%A8%E9%80%9A%E7%9F%A5%E3%81%AE%E3%83%99%E3%82%B9%E3%83%88%E3%83%97%E3%83%A9%E3%82%AF%E3%83%86%E3%82%A3%E3%82%B9\" aria-hidden=\"true\" tabindex=\"-1\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003eCookie 利用通知のベストプラクティス\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e共有: lacolaco\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003ca href=\"https://web.dev/cookie-notice-best-practices/\" target=\"_blank\" rel=\"nofollow\"\u003eBest practices for cookie notices\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eweb.dev より、パフォーマンスやユーザー体験をできるだけ損なわないように Cookie の利用表示を出すためのプラクティス\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eCookie 通知スクリプトは非同期で読み込む\n\u003cul\u003e\n\u003cli\u003eできるだけ Resource Hints も使って先読みする\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eTesting cookie notices with WebPageTest\n\u003cul\u003e\n\u003cli\u003eWebPageTest の機能で Cookie 通知のボタンを押すところまでをテストできる\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eTesting cookie notices with Lighthouse\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eClear Storage\u003c/code\u003e でテストすれば Cookie 通知が出る状態をテストできる\u003c/li\u003e\n\u003cli\u003eCLI の場合は \u003ccode\u003e--extra-headers\u003c/code\u003e で任意の Cookie を無理やりつけてテストできる\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003ePlacement\n\u003cul\u003e\n\u003cli\u003eヘッダーかフッターが一般的\n\u003cul\u003e\n\u003cli\u003e特にフッターはレイアウトシフトも起こさないので推奨\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eインラインも有効だが実装の組み込みが容易じゃない場合が多く選択されにくい\u003c/li\u003e\n\u003cli\u003eモーダル\n\u003cul\u003e\n\u003cli\u003e小さい部分モーダルなら CLS を引き起こさず邪魔にならない通知を出す手段になる可能性\u003c/li\u003e\n\u003cli\u003e全画面モーダルはユーザーの脱落が起こりやすいため注意\n\u003cul\u003e\n\u003cli\u003e\n\u003cblockquote\u003e\n\u003cp\u003eフルスクリーンの Cookie 同意モーダルの使用を検討している場合は、\u003ca href=\"https://techcrunch.com/2020/05/06/no-cookie-consent-walls-and-no-scrolling-isnt-consent-says-eu-data-protection-body/\" target=\"_blank\" rel=\"nofollow\"\u003ecookie walls\u003c/a\u003eに関する法律に注意する必要があります。\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch3 id=\"サードパーティスクリプトをコントロール下に置く\"\u003e\u003ca href=\"#%E3%82%B5%E3%83%BC%E3%83%89%E3%83%91%E3%83%BC%E3%83%86%E3%82%A3%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%97%E3%83%88%E3%82%92%E3%82%B3%E3%83%B3%E3%83%88%E3%83%AD%E3%83%BC%E3%83%AB%E4%B8%8B%E3%81%AB%E7%BD%AE%E3%81%8F\" aria-hidden=\"true\" tabindex=\"-1\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003eサードパーティスクリプトをコントロール下に置く\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e共有: lacolaco\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003ca href=\"https://web.dev/controlling-third-party-scripts/\" target=\"_blank\" rel=\"nofollow\"\u003eKeeping third-party scripts under control\u003c/a\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eサードパーティスクリプトをコントローラブルな状態で利用するためのガバナンス設計\u003c/li\u003e\n\u003cli\u003eTag governance process\n\u003cul\u003e\n\u003cli\u003eコンプライアンス\u003c/li\u003e\n\u003cli\u003e必要性の確認\u003c/li\u003e\n\u003cli\u003eオーナーシップの明確化\u003c/li\u003e\n\u003cli\u003e利用用途の明確化\n\u003cul\u003e\n\u003cli\u003e\n\u003cblockquote\u003e\n\u003cp\u003eFurthermore, have there been any commercial vs performance trade-off discussions? If there is a tag that is deemed as \"required\" because it brings in revenue, has there been an analysis to the potential revenue lost through speed regression\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e定期的なレビュー\n\u003cul\u003e\n\u003cli\u003eWeb サイトのスクリプトのサイズやサードパーティスクリプトの数など、気づかないうちに肥大化することを防ぐ\u003c/li\u003e\n\u003cli\u003eパフォーマンスバジェットとして定義して CI などで確認することもできるかもしれない\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch3 id=\"april-2021-73---babelproposal\"\u003e\u003ca href=\"#april-2021-73---babelproposal\" aria-hidden=\"true\" tabindex=\"-1\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003e\u003ca href=\"https://github.com/babel/proposals/issues/73\" target=\"_blank\" rel=\"nofollow\"\u003eApril 2021 #73 - babel/proposal\u003c/a\u003e\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e共有者: sosukesuzuki\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eGoogle の Justin Ridgewell が TC39 ミーティングがあるたびにプロポーザルの変動を教えてくれる Issue 2021 年 4 月版。\u003c/p\u003e\n\u003cp\u003e今回の見どころ\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eClass Features が Stage 4 になり ES2022 となる初めての提案に\u003c/li\u003e\n\u003cli\u003eobject.has が今回初登場にも関わらず Stage 1 を飛ばして一気に Stage 2 へ\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"0---1\"\u003e\u003ca href=\"#0---1\" aria-hidden=\"true\" tabindex=\"-1\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003e0 -\u003e 1\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/Jack-Works/proposal-readonly-arraybuffer/\" target=\"_blank\" rel=\"nofollow\"\u003eRead-only ArrayBuffer\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003efreeze できる ArrayBuffer\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/Jack-Works/proposal-arraybuffer-fixed-view\" target=\"_blank\" rel=\"nofollow\"\u003eFixed view of ArrayBuffer\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003eDataView から .buffer が読めない ArrayBuffer\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/rricard/proposal-change-array-by-copy\" target=\"_blank\" rel=\"nofollow\"\u003eChange Array by copy\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003eイミュータブルな配列操作メソッド\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"0---2\"\u003e\u003ca href=\"#0---2\" aria-hidden=\"true\" tabindex=\"-1\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003e0 -\u003e 2\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/jamiebuilds/proposal-object-has\" target=\"_blank\" rel=\"nofollow\"\u003eobject.has\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003ehasOwnProperty\u003c/code\u003e のスタティックメソッド版\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"1---2\"\u003e\u003ca href=\"#1---2\" aria-hidden=\"true\" tabindex=\"-1\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003e1 -\u003e 2\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/tc39/proposal-symbols-as-weakmap-keys\" target=\"_blank\" rel=\"nofollow\"\u003eSymbols as WeakMap keys\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003eWeakMap のキーとしてシンボルを使えるようになる\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"3---4\"\u003e\u003ca href=\"#3---4\" aria-hidden=\"true\" tabindex=\"-1\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003e3 -\u003e 4\u003c/h4\u003e\n\u003cp\u003eES2022 に入るはじめての提案\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/tc39/proposal-class-fields\" target=\"_blank\" rel=\"nofollow\"\u003eClass Fields\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/tc39/proposal-private-methods\" target=\"_blank\" rel=\"nofollow\"\u003ePrivate methods\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/tc39/proposal-static-class-features\" target=\"_blank\" rel=\"nofollow\"\u003eStatic class features\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch3 id=\"slow-and-steady-converting-sentrys-entire-frontend-to-typescript\"\u003e\u003ca href=\"#slow-and-steady-converting-sentrys-entire-frontend-to-typescript\" aria-hidden=\"true\" tabindex=\"-1\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003e\u003ca href=\"https://blog.sentry.io/2021/04/12/slow-and-steady-converting-sentrys-entire-frontend-to-typescript\" target=\"_blank\" rel=\"nofollow\"\u003eSlow and Steady: Converting Sentry’s Entire Frontend to TypeScript\u003c/a\u003e\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e共有者: sakito\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eSentry を 12 人で 1 年間かけて 1100 ファイル(9,500 行)を TS に置き換えたはなしです。\u003c/p\u003e\n\u003cp\u003eTS に置き換える話は昨今よくある話ですが、この記事では取り組みについて啓蒙活動から具体的なアクションまで説明されています。\u003c/p\u003e\n\u003cp\u003eチームの教育 =\u003e 開発しやすいように基盤の構築 =\u003e 戦略を立てていく(頻繁に使用するファイルから倒していく) =\u003e モチベの維持(slackbot で進捗を可視化など)の流れで進めたとのことです。\u003c/p\u003e\n\u003cp\u003eTS の置き換えが終わるまで、React の hooks 化やライブラリーのアップデートを行わず集中してやったとも書かれています。\u003c/p\u003e\n\u003cp\u003eTS に置き換える以外でも参考になる話でした。\u003c/p\u003e\n\u003chr\u003e\n\u003ch3 id=\"solving-a-mystery-behavior-of-parseint-in-javascript\"\u003e\u003ca href=\"#solving-a-mystery-behavior-of-parseint-in-javascript\" aria-hidden=\"true\" tabindex=\"-1\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003e\u003ca href=\"https://dmitripavlutin.com/parseint-mystery-javascript/\" target=\"_blank\" rel=\"nofollow\"\u003eSolving a Mystery Behavior of parseInt() in JavaScript\u003c/a\u003e\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e共有者: pirosikick\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e小ネタ。\u003ccode\u003eparseInt(0.000005)\u003c/code\u003eは\u003ccode\u003e0\u003c/code\u003eを返すのに、\u003ccode\u003eparseInt(0.0000005)\u003c/code\u003eは\u003ccode\u003e5\u003c/code\u003eを返す件について。最近、別件で parseInt 関数の仕様を調べる機会があったので紹介。\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://tc39.es/ecma262/#sec-parseint-string-radix\" target=\"_blank\" rel=\"nofollow\"\u003eparseInt 関数の仕様\u003c/a\u003eは、かなりざ〜っくり説明すると以下のとおり。\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eparseInt(string, radix)\u003c/li\u003e\n\u003cli\u003einputString = ToString(string)\u003c/li\u003e\n\u003cli\u003einputString の先頭のスペースを trim する\u003c/li\u003e\n\u003cli\u003eradix が\u003ccode\u003e0\u003c/code\u003e or \u003ccode\u003eundefined\u003c/code\u003eの場合は、radix = 10 とするけど、string の先頭が\"0x\" or \"0X\"の場合は radix = 16\u003c/li\u003e\n\u003cli\u003eradix が\u003ccode\u003e16\u003c/code\u003eの場合、string は\"0x\" or \"0X で始まってもいい\u003c/li\u003e\n\u003cli\u003eradix \u0026#x3C; 2 || radix \u003e 36 → return NaN\u003c/li\u003e\n\u003cli\u003e先頭の\u003ccode\u003e+\u003c/code\u003e,\u003ccode\u003e-\u003c/code\u003e（プラス、マイナス）は取り除いて、\nradix 進数の範囲外の文字が見つかったらその文字の前までの文字列を評価する\n\u003cul\u003e\n\u003cli\u003e例）radix が\u003ccode\u003e2\u003c/code\u003eで\u003ccode\u003e\"0101012\"\u003c/code\u003eが入力された場合、\u003ccode\u003e\"010101\"\u003c/code\u003eを評価する\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e先頭が\u003ccode\u003e-\u003c/code\u003eの場合は、-1 を掛ける\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eparseInt 関数の第 1 引数は\u003ccode\u003eToString\u003c/code\u003eされるので、\u003ccode\u003e0.0000005\u003c/code\u003eは\u003ccode\u003e\"5e-7\"\u003c/code\u003eになる（ちなみに、\u003ccode\u003eString(0.000005)\u003c/code\u003eは\u003ccode\u003e\"0\"\u003c/code\u003e）。「radix 進数の範囲外の文字が見つかったらその文字の前までの文字列を評価する」ので\u003ccode\u003e\"5\"\u003c/code\u003eだけ評価され、\u003ccode\u003e5\u003c/code\u003eを返す。\u003c/p\u003e\n\u003cp\u003eちなみに、「radix 進数の範囲外の文字が見つかったらその文字の前までの文字列を評価する」という仕様は、\u003ccode\u003e\"10px\"\u003c/code\u003eのような数字 + suffix の文字列から数字だけを取り出すときに便利。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token function\"\u003eparseInt\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"10px\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// =\u003e 10\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003chr\u003e\n\u003ch3 id=\"今月の-ie11-関連情報\"\u003e\u003ca href=\"#%E4%BB%8A%E6%9C%88%E3%81%AE-ie11-%E9%96%A2%E9%80%A3%E6%83%85%E5%A0%B1\" aria-hidden=\"true\" tabindex=\"-1\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003e今月の IE11 関連情報\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e共有者: nakajmg\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e今月も IE サポートを終了したり終了の予告を出すサービスや会社がありました。\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://help.abema.tv/hc/ja/articles/360055647611\" target=\"_blank\" rel=\"nofollow\"\u003eABEMA が 4/21 をもって IE11 のサポートを終了した\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://help.hulu.jp/hc/ja/articles/900005502846\" target=\"_blank\" rel=\"nofollow\"\u003ehulu が 2021/07/14 でサポートを終了を予告\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eIE11 関連の動きが気になる方は\u003ca href=\"https://docs.google.com/document/d/1XP58gVMyp_UCP4FFsf5ATpvRVwqi7v_EpEF3sl_Sobk\" target=\"_blank\" rel=\"nofollow\"\u003eIE11 サポート終了の歴史\u003c/a\u003eをチェック。\u003c/p\u003e\n\u003chr\u003e\n\u003ch3 id=\"deps-add-yarn-1225-by-arcanis-·-pull-request-37277-·-nodejsnode\"\u003e\u003ca href=\"#deps-add-yarn-1225-by-arcanis-%C2%B7-pull-request-37277-%C2%B7-nodejsnode\" aria-hidden=\"true\" tabindex=\"-1\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003e\u003ca href=\"https://github.com/nodejs/node/pull/37277\" target=\"_blank\" rel=\"nofollow\"\u003edeps: add Yarn 1.22.5 by arcanis · Pull Request #37277 · nodejs/node\u003c/a\u003e\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e共有者: shisama\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eyarn v1をNode.js本体に追加するPRが出ています。\u003c/p\u003e\n\u003cp\u003eこれがマージされれば、npmで個別にyarnをインストールしなくてもNode.jsをインストールするだけでyarnも使えるようになります。\u003c/p\u003e\n\u003cp\u003eただ、yarnはすでにv2がリリースされていて、今後はyarn v2がメンテされていきます。\nそのため、v1すでにレガシーという意見もありますが、現状\u003ccode\u003enpm install yarn\u003c/code\u003eではv1がインストールされる現状やv1は今でも利用者が多いことや、yarn v2を使いたいユーザーにとっても価値のあるものとしてyarn v1を選んだとのこと。\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eYarn 1 isn't legacy\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/nodejs/node/pull/37277#issuecomment-775586604\" target=\"_blank\" rel=\"nofollow\"\u003ehttps://github.com/nodejs/node/pull/37277#issuecomment-775586604\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eyarnを加えること自体に賛否があります。\nyarnはnpmよりパフォーマンスなど優れているんだからyarnは入れるべきという意見や、メンテコストが上がるから増やすべきではないという意見があります。そもそもNode.js本体にパッケージマネージャーは入れなくてもいいのではという意見もあります。\u003c/p\u003e\n\u003cp\u003eしかし現行のnpmはyarn v1と同じぐらい優れているし、yarn v1には修正されない重大なバグもある、複数パッケージがあると初心者は混乱するのではないかと指摘があります。\n\u003ca href=\"https://github.com/nodejs/node/pull/37277#issuecomment-817898794\" target=\"_blank\" rel=\"nofollow\"\u003ehttps://github.com/nodejs/node/pull/37277#issuecomment-817898794\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eもう一案としてはcorepack経由でyarnをNode.js本体に含めるという案もあります。\n\u003ca href=\"https://github.com/nodejs/node/pull/37277#issuecomment-819824338\" target=\"_blank\" rel=\"nofollow\"\u003ehttps://github.com/nodejs/node/pull/37277#issuecomment-819824338\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003ecorepackはyarnとかpnpmなどnpm以外のパッケージマネージャーを一括管理するツールです。現在はnodejs管理下に置かれています。今でもnpmからインストールして使えます。\n\u003ca href=\"https://github.com/nodejs/corepack\" target=\"_blank\" rel=\"nofollow\"\u003ehttps://github.com/nodejs/corepack\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003ecorepackをNode.js本体に入れるPRも出ています。\n\u003ca href=\"https://github.com/nodejs/node/pull/35398\" target=\"_blank\" rel=\"nofollow\"\u003ehttps://github.com/nodejs/node/pull/35398\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e今週末にTSCのMTGがあって、この件もAgendaに載っているので何らかの動きがありそう。\u003c/p\u003e\n\u003cp\u003eNode.js関連だと4/20にNode.js v16がリリースされました。\nM1 MacでもNode.jsが動くようになったり、timers/promisesが便利だったりします。\nあと、Node.js v10が4/30でEnd-of-Lifeなので、移行してください。\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://nodejs.org/en/blog/release/v16.0.0/\" target=\"_blank\" rel=\"nofollow\"\u003eNode v16.0.0 (Current) | Node.js\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://shisama.hatenablog.com/entry/2021/04/22/090000\" target=\"_blank\" rel=\"nofollow\"\u003eNode.js v16 の主な変更点 - 別にしんどくないブログ\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch3 id=\"css-is-a-strongly-typed-language\"\u003e\u003ca href=\"#css-is-a-strongly-typed-language\" aria-hidden=\"true\" tabindex=\"-1\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003e\u003ca href=\"https://css-tricks.com/css-is-a-strongly-typed-language/\" target=\"_blank\" rel=\"nofollow\"\u003eCSS is a Strongly Typed Language\u003c/a\u003e\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e共有者: b4h0_c4t\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e名前から強めの思想を感じ取ったので共有。\u003c/p\u003e\n\u003cp\u003e最近 TypeScript のような強い型付け言語がはやっているけど、CSSも強い型付け言語なんだよ、という話しの読み物系記事。\nCSSプロパティの型リストが書いてあったり、CSSのレジリエンスについて幾つかのエラーケースをもとにCodePenで解説していたりと学びも多いと思います。\u003c/p\u003e\n\u003chr\u003e\n"},"__N_SSG":true},"page":"/posts/[slug]","query":{"slug":"2021-04"},"buildId":"YEDqcfiOgV5lpJgYEkujL","runtimeConfig":{"basePath":""},"isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>